# 仕様駆動開発（SDD）プロンプトテンプレート

このドキュメントは、Claude以外のAIエージェント（GPT-4, Gemini, etc.）で
仕様駆動開発を行う際のプロンプトテンプレートを提供します。

---

## 使い方

1. 各セクションのテンプレートをコピー
2. `{placeholder}` 部分を実際の内容に置き換え
3. AIチャットにペースト

---

## セッション開始時のプロンプト

新しい開発セッションを開始する際に使用します。

```markdown
あなたは仕様駆動開発（SDD）のワークフローに従って開発を行うAIアシスタントです。

## 基本ルール

1. **仕様ファースト**: 実装前に必ずACを確認し、ACの範囲内のみ実装する
2. **TDD厳守**: Red → Green → Refactor サイクルを守る
3. **スコープ管理**: ACに記載のない機能は実装せず、提案のみ行う
4. **完了確認**: 全ACを満たしたことを確認してから完了とする

## ワークフロー

### タスク開始時
1. アクションファイルを確認
2. ユーザーストーリーとACを理解
3. ACからテストケースを導出
4. 「このACで進めますか？」と確認

### 実装中
- テストを先に書く（Red）
- 最小限の実装（Green）
- コード改善（Refactor）

### 完了時
- 全ACをチェック
- ステータスを更新
- 次のアクションを提示

## 禁止事項
- ACなしでの実装開始
- スコープ外の「ついでに」実装
- テストなしの実装

このルールに従って開発を進めてください。
```

---

## タスク開始時のプロンプト

新しいアクションを開始する際に使用します。

```markdown
## 実装するアクション

{アクションファイルの内容をここにペースト}

---

上記のアクションを実装してください。

### 確認事項
1. ユーザーストーリーを理解していますか？
2. ACを達成するためのテストケースを導出してください
3. 不明点があれば質問してください
4. 準備ができたら「このACで進めます」と宣言してから実装を開始してください
```

**例:**

```markdown
## 実装するアクション

---
id: "001-01-01"
phase_id: "001"
task_id: "001-01"
title: "設定要件の確認と決定"
status: "pending"
---

# アクション: 設定要件の確認と決定

## ユーザーストーリー

開発者として、設定ファイルの方針を明確にして、迷いなく開発を進められるようにしたい。
なぜなら設定の不統一による混乱を避けたいから。

## Acceptance Criteria

- [ ] 設定ファイル配置方針が明確に決定されていること
- [ ] ESLint、Prettier、TypeScriptの設定内容が仕様として確定していること
- [ ] package.jsonスクリプトの統一方針が決定されていること

---

上記のアクションを実装してください。
```

---

## 完了確認時のプロンプト

アクション完了を確認する際に使用します。

```markdown
## 完了確認

実装が完了しました。以下のACを確認してください。

### Acceptance Criteria

{ACリストをここに記載}

### 確認事項
1. 各ACが達成されているか確認してください
2. 全てのテストが通過していることを確認してください
3. 問題がなければ「完了確認OK」と宣言してください
4. 次のアクションを提示してください
```

---

## スコープ外対応時のプロンプト

スコープ外の実装を依頼された場合に使用します。

```markdown
## スコープ確認

ご依頼いただいた「{依頼内容}」は、現在のアクションのACに含まれていません。

### 現在のAC
{現在のACリスト}

### 対応方針
1. 現在のアクションでは実装しません
2. 別のアクションとして提案します
3. ユーザーが承諾した場合、新規仕様を作成します

### 提案
以下の新規アクションとして定義することを提案します：

---
id: "{新ID}"
title: "{タイトル}"
status: "pending"
---

## Acceptance Criteria
- [ ] {AC1}
- [ ] {AC2}
---

この提案を承認しますか？
```

---

## トラブルシューティング用プロンプト

### ACが曖昧な場合

```markdown
## AC明確化リクエスト

以下のACが曖昧なため、実装を開始できません。

### 曖昧なAC
「{曖昧なAC}」

### 質問
{具体的な質問}

### 提案
以下のように明確化することを提案します：
「{明確化したAC}」

この明確化で進めてよいですか？
```

### テストが通らない場合

```markdown
## テスト失敗報告

以下のテストが失敗しています。

### 失敗したテスト
{テスト内容}

### エラー内容
{エラーメッセージ}

### 分析
{原因の分析}

### 対応案
1. {対応案1}
2. {対応案2}

どの対応を採用しますか？
```

---

## コンテキスト追加テンプレート

長いセッションでコンテキストを追加する場合に使用します。

```markdown
## コンテキスト追加

### これまでの進捗
- 完了: {完了したアクションリスト}
- 現在: {現在のアクション}

### 関連ファイル
{関連するコードやファイルの内容}

### 次のタスク
{次に実行するアクションの内容}

上記のコンテキストを踏まえて、開発を継続してください。
```

---

## Tips

### トークン節約

- 不要な履歴は含めない
- 必要なACとユーザーストーリーのみ含める
- コードは該当部分のみ抜粋

### 品質向上

- ACは常に明示的に含める
- 完了確認時は必ずACチェックを依頼
- スコープ外対応は即座に行う

### エラー防止

- 毎回ワークフローの基本ルールを含める
- 禁止事項を明示する
- 確認ポイントを明確にする
